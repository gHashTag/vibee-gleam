# Инструкция по подключению VIBEE MCP

## Что такое VIBEE MCP?

VIBEE MCP — это сервер Model Context Protocol, который позволяет AI-ассистентам (Claude, GPT и др.) работать с Telegram:
- Читать и отправлять сообщения
- Управлять несколькими аккаунтами
- Искать по истории переписок
- Создавать AI Digital Clone на основе ваших сообщений

---

## Подключение

### Claude Code (CLI)

**Вариант 1: Глобальное подключение (рекомендуется)**

```bash
claude mcp add vibee --transport sse --url https://vibee-mcp.fly.dev/sse
```

MCP будет доступен во всех проектах.

**Вариант 2: Локальное подключение (только для текущего проекта)**

Создайте файл `.mcp.json` в корне проекта:

```json
{
  "mcpServers": {
    "vibee": {
      "url": "https://vibee-mcp.fly.dev/sse"
    }
  }
}
```

После подключения **перезапустите Claude Code**.

---

### Cursor

Добавьте в файл `.cursor/mcp.json` (создайте, если не существует):

```json
{
  "mcpServers": {
    "vibee": {
      "url": "https://vibee-mcp.fly.dev/sse"
    }
  }
}
```

Перезапустите Cursor.

---

### Другие MCP-клиенты

Используйте SSE транспорт с URL:

```
https://vibee-mcp.fly.dev/sse
```

---

## Проверка подключения

После подключения выполните команду:

```
session_list
```

Если всё работает, вы увидите список сессий (или пустой список, если сессий ещё нет).

---

## Первоначальная настройка

### 1. Создание сессии

```
session_create phone="+79001234567"
```

Замените номер на ваш. Будет создана новая сессия и установлена как активная.

### 2. Авторизация

Отправьте код на телефон:

```
auth_send_code phone="+79001234567"
```

Введите код из Telegram:

```
auth_verify_code code="12345" phone="+79001234567"
```

### 3. Проверка

```
telegram_get_me
```

Должна вернуться информация о вашем аккаунте.

---

## Работа с несколькими аккаунтами

VIBEE поддерживает неограниченное количество Telegram аккаунтов.

### Добавление второго аккаунта

```
# Создать сессию (не делать активной)
session_create phone="+79009876543" set_active=false

# Авторизовать
auth_send_code phone="+79009876543"
auth_verify_code code="54321" phone="+79009876543"
```

### Переключение между аккаунтами

```
# Посмотреть все сессии
session_list

# Переключиться на другую сессию
session_set_active session_id="sess_abc123"
```

### Использование конкретной сессии без переключения

```
telegram_send_message session_id="sess_xyz789" chat_id="123" text="Сообщение от другого аккаунта"
```

---

## Часто используемые команды

| Команда | Описание |
|---------|----------|
| `session_list` | Список всех сессий |
| `telegram_get_me` | Информация о текущем аккаунте |
| `telegram_get_dialogs limit=20` | Список чатов |
| `telegram_get_history chat_id="123" limit=50` | История чата |
| `telegram_send_message chat_id="123" text="Привет"` | Отправить сообщение |
| `conversation_search query="ключевое слово"` | Поиск по сообщениям |

---

## Устранение неполадок

### MCP не подключается

1. Проверьте интернет-соединение
2. Убедитесь, что URL правильный: `https://vibee-mcp.fly.dev/sse`
3. Перезапустите Claude Code / Cursor

### "No active session"

Создайте и авторизуйте сессию (см. раздел "Первоначальная настройка").

### Код авторизации не приходит

1. Проверьте правильность номера телефона
2. Подождите 1-2 минуты
3. Попробуйте снова: `auth_send_code phone="+7..."`

### Ошибка "Session not found"

Сессия могла истечь. Создайте новую:

```
session_create phone="+7..."
```

---

## Безопасность

- Сервер хранит только session_id, не хранит пароли
- Авторизация через официальный Telegram API
- Рекомендуется использовать отдельный аккаунт для тестирования

---

## Поддержка

Если возникли проблемы, создайте issue в репозитории или напишите в Telegram.
